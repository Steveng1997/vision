<div class="container">
    <div class="row">
        <div class="col-sm-9 col-md-7 col-lg-8 mx-auto">
            <div class="m-0 vh-90 row justify-content-center align-items-center">
                <form *ngIf="liquidationForm" [formGroup]="formTemplate">

                    <div class="text-center mt-4 mb-4">
                        <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" fill="currentColor"
                            style="cursor: pointer;" class="bi bi-plus-circle text-primary" viewBox="0 0 16 16"
                            (click)="insertForm()">
                            <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z" />
                            <path
                                d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z" />
                        </svg>
                        <div>
                            <label> Nueva liquidación </label>
                        </div>
                    </div>

                    <div class="row tableContainer">

                        <div class="therapistContainer">
                            <div class="row g-0">
                                <label class="text">Terapeuta</label>
                                <select class="form-select" formControlName="terapeuta"
                                    [(ngModel)]="liquidationTherapist.terapeuta" (change)="filters()" style="height: 2.2rem; border-color: #8C52FF; color: #242424; font-size: 18px; 
                                        font-family: sans-serif;">
                                    <option selected value="">Selecciona</option>
                                    <option *ngFor="let terap of terapeuta" [value]="terap.nombre">
                                        {{terap.nombre}} </option>
                                </select>
                            </div>
                        </div>

                        <div class="containerInCharge">
                            <div class="row g-0">
                                <label class="text">Encargada</label>
                                <select class="form-select" formControlName="encargada"
                                    [(ngModel)]="liquidationTherapist.encargada" (ngModelChange)="filters()"
                                    style="height: 2.2rem; border-color: #8C52FF; color: #242424; font-size: 18px; font-family: sans-serif;">
                                    <option *ngIf="administratorRole" selected value="">Selecciona</option>
                                    <option *ngFor="let managers of manager" [value]="managers.nombre">
                                        {{managers.nombre}}
                                    </option>
                                </select>
                            </div>
                        </div>

                        <div class="dateContainer">
                            <div class="row g-0">
                                <label class="text">Fecha Inicio</label>
                                <input type="date" class="form-control" (change)="filters()"
                                    formControlName="fechaInicio" [value]="CurrenDate"
                                    style="height: 2.2rem; border-color: #8C52FF; color: #242424; font-size: 18px; font-family: sans-serif">
                            </div>
                        </div>

                        <div class="dateContainer">
                            <div class="row g-0">
                                <label class="text">Fecha Final</label>
                                <input type="date" class="form-control" (change)="filtersDateEnd($event)"
                                    formControlName="FechaFin" [value]="CurrenDate" style="height: 2.2rem; border-color: #8C52FF; 
                                        color: #242424; font-size: 18px; font-family: sans-serif">
                            </div>
                        </div>

                        <div class="dateContainer">
                            <div class="row g-0">
                                <label class="text">Buscar</label>
                                <input type="text" class="form-control" formControlName="busqueda"
                                    (ngModelChange)="filters()" style="height: 2.2rem; border-color: #8C52FF; color: #242424; 
                                        font-size: 18px; font-family: sans-serif;">
                            </div>
                        </div>

                        <div class="buttonDeleteContainer">
                            <div class="row g-0">
                                <button type="submit" id="buttonDelete" mat-raised-button color="warn" disabled
                                    (click)="deleteService()">Eliminar</button>
                            </div>
                        </div>
                    </div>
                </form>

                <!-- Table 1 -->
                <div *ngIf="liquidationForm" class="column">
                    <div class="columnTable">

                        <div class="textManager">
                            <label>Encargada</label>
                        </div>

                        <div class="textTherapist">
                            <label>Terapeuta</label>
                        </div>

                        <div class="textImport">
                            <label>Importe</label>
                        </div>

                        <div class="textDate">
                            <label>Desde</label>
                        </div>

                        <div class="textDate">
                            <label>Hasta</label>
                        </div>

                        <div class="textTreatment">
                            <label>Tratamiento</label>
                        </div>

                    </div>

                    <hr class="lineTable1">

                    <div class="columnTable" *ngFor="let liqTerap of (liquidated | terapeuta: liquidationTherapist.terapeuta 
                            | encargada: liquidationTherapist.encargada | fechaFinalEncargada: fechaInicio:fechaFinal | 
                            busquedaTerapeuta: filtredBusqueda) | paginate: { itemsPerPage: 50, currentPage: page }"
                        (click)="dataFormEdit(liqTerap.idTerapeuta, liqTerap.id)">

                        <div class="columnManager">{{liqTerap?.encargada}}</div>

                        <div class="columnTherapist">{{liqTerap?.terapeuta}}</div>

                        <div class="columnImport">{{liqTerap?.importe + ' €'}}</div>

                        <div style="font-family: sans-serif; font-size: 18px">
                            {{liqTerap?.desdeFechaLiquidado + ' - ' + liqTerap?.desdeHoraLiquidado}} </div>

                        <div style="font-family: sans-serif; font-size: 18px">
                            {{liqTerap?.hastaFechaLiquidado + ' - ' + liqTerap?.hastaHoraLiquidado}} </div>

                        <div class="columnTreatment">{{liqTerap?.tratamiento + ' €'}}</div>
                    </div>
                </div>

                <pagination-controls *ngIf="liquidationForm" class="pagination_Mobile" (pageChange)="page = $event"
                    previousLabel="" nextLabel="">
                </pagination-controls>

                <!-- Agregar Terapeuta -->


                <label *ngIf="addForm" class="title">NUEVA LIQUIDACIÓN</label>

                <form *ngIf="addForm">

                    <div class="row tableContainer">

                        <div *ngIf="!administratorRole" class="therapistContainer">
                            <div class="row g-0">
                                <label class="text">Terapeuta</label>
                                <select class="form-select" name="terapeuta"
                                    [(ngModel)]="liquidationTherapist.terapeuta" (ngModelChange)="calculateServices()"
                                    style="height: 2.2rem; border-color: #8C52FF; color: #242424; font-size: 18px; 
                                                font-family: sans-serif;">
                                    <option selected value="">Selecciona</option>
                                    <option *ngFor="let terap of terapeuta" [value]="terap.nombre">
                                        {{terap.nombre}} </option>
                                </select>
                            </div>
                        </div>

                        <div *ngIf="administratorRole" class="therapistContainer">
                            <div class="row g-0">
                                <label class="text">Terapeuta</label>
                                <select class="form-select" name="terapeuta"
                                    [(ngModel)]="liquidationTherapist.terapeuta" style="height: 2.2rem; border-color: #8C52FF; color: #242424; font-size: 18px; 
                                                font-family: sans-serif;">
                                    <option selected value="">Selecciona</option>
                                    <option *ngFor="let terap of terapeuta" [value]="terap.nombre">
                                        {{terap.nombre}} </option>
                                </select>
                            </div>
                        </div>

                        <div *ngIf="administratorRole" class="containerInCharge">
                            <div class="row g-0">
                                <label class="text">Encargada</label>
                                <select class="form-select" name="encargada"
                                    [(ngModel)]="liquidationTherapist.encargada" (ngModelChange)="calculateServices()"
                                    style="height: 2.2rem; border-color: #8C52FF; color: #242424; font-size: 18px; font-family: sans-serif;">
                                    <option selected value="">Selecciona</option>
                                    <option *ngFor="let managers of manager" [value]="managers.nombre">
                                        {{managers.nombre}}
                                    </option>
                                </select>
                            </div>
                        </div>

                        <div *ngIf="!administratorRole" class="containerInCharge">
                            <div class="row g-0">
                                <label class="text">Encargada</label>
                                <select class="form-select" name="encargada"
                                    [(ngModel)]="liquidationTherapist.encargada"
                                    style="height: 2.2rem; border-color: #8C52FF; color: #242424; font-size: 18px; font-family: sans-serif;">
                                    <option *ngFor="let managers of manager" [value]="managers.nombre">
                                        {{managers.nombre}}
                                    </option>
                                </select>
                            </div>
                        </div>

                    </div>
                </form>

                <div *ngIf="selected && addForm">

                    <div class="row tableContainer2">
                        <div class="fechaInicio">
                            <label style="color: #242424; font-size: 18px; font-family: sans-serif; 
                                        font-weight: bold; display: contents;">Inicial</label>
                            <input type="date" class="form-control" name="desdeFechaLiquidado"
                                (change)="inputDateAndTime()" [(ngModel)]="liquidationTherapist.desdeFechaLiquidado"
                                [value]="liquidationTherapist.desdeFechaLiquidado"
                                style="height: 2.2rem; border-color: #8C52FF; color: #242424; font-size: 18px; font-family: sans-serif">
                        </div>

                        <div class="horaInicio">
                            <input type="time" min="18:00" max="21:00" step="3600" class="form-control"
                                (change)="inputDateAndTime()" name="desdeHoraLiquidado"
                                [(ngModel)]="liquidationTherapist.desdeHoraLiquidado"
                                [value]="liquidationTherapist.desdeHoraLiquidado"
                                style="height: 2.2rem; border-color: #8C52FF; color: #242424; font-size: 18px; font-family: sans-serif" />
                        </div>

                        <div class="fechaFinal">
                            <label style="color: #242424; font-size: 18px; font-family: sans-serif; 
                                            font-weight: bold; display: contents;">Final</label>
                            <input type="date" class="form-control" name="hastaFechaLiquidado"
                                (change)="inputDateAndTime()" [(ngModel)]="liquidationTherapist.hastaFechaLiquidado"
                                [value]="liquidationTherapist.hastaFechaLiquidado"
                                style="height: 2.2rem; border-color: #8C52FF; color: #242424; font-size: 18px; font-family: sans-serif">
                        </div>

                        <div class="horaFinal">
                            <input type="time" name="horaStart" min="18:00" max="21:00" step="3600" class="form-control"
                                [(ngModel)]="liquidationTherapist.hastaHoraLiquidado" (change)="inputDateAndTime()"
                                [value]="liquidationTherapist.hastaHoraLiquidado"
                                style="height: 2.2rem; border-color: #8C52FF; color: #242424; font-size: 18px; font-family: sans-serif">
                        </div>
                    </div>

                    <div class="row containerTitleSelect">
                        <div class="row g-0">
                            <label class="titleLiquidation">TOTAL LIQUIDACIÓN</label>
                        </div>

                        <div class="row g-0">
                            <label class="titleLiquidation">{{totalCommission + ' €'}}</label>
                        </div>

                    </div>
                </div>

                <!-- Table 2 -->

                <div class="column2" *ngIf="selected && addForm">
                    <div class="columnTable2">

                        <div class="">
                            <label></label>
                        </div>

                        <div class="textDate">
                            <label>Fecha</label>
                        </div>

                        <div class="textExit">
                            <label>Salida</label>
                        </div>

                        <div class="textHour">
                            <label>Hora</label>
                        </div>

                        <div class="textTreatment">
                            <label>Tratamiento</label>
                        </div>

                        <div class="textTip">
                            <label>Propina</label>
                        </div>

                        <div class="textPay">
                            <label>Pago</label>
                        </div>

                        <div class="textValueTherapist">
                            <label>€ A Terap.</label>
                        </div>

                        <div class="textValue">
                            <label>Bebida</label>
                        </div>

                        <div class="textValue">
                            <label>Tabaco</label>
                        </div>

                        <div class="textVitamin">
                            <label>Vitamina</label>
                        </div>

                        <div class="textValue">
                            <label>Otros</label>
                        </div>

                    </div>

                    <hr class="lineTable2">

                    <div class="columnTable2" *ngFor="let serv of (unliquidatedService 
                                    | terapeuta: liquidationTherapist.terapeuta | encargada: liquidationTherapist.encargada) 
                                    | paginate: { itemsPerPage: 10, currentPage: page }">

                        <div [ngClass]="{'color2':serv.nota !== ''}" (click)="notes(serv.id, modalTabl)">
                        </div>

                        <div class="columnDate" (click)="goToEdit(serv.id)">{{serv?.fecha}}</div>

                        <div class="columnExit" (click)="goToEdit(serv.id)">{{serv?.salida}}</div>

                        <div class="columnHour" (click)="goToEdit(serv.id)">
                            {{serv.horaStart + ' :' + serv.horaEnd}} </div>

                        <div class="columnTreatment" (click)="goToEdit(serv.id)">{{serv.servicio}} </div>

                        <div class="columnValueTip" (click)="goToEdit(serv.id)">{{serv?.propina}} </div>

                        <div class="columnPaymentMethod" (click)="goToEdit(serv.id)">{{serv?.formaPago}}</div>

                        <div class="columnValueTherapist" (click)="goToEdit(serv.id)">{{serv?.numberTerap + ' €'}}</div>

                        <div class="columnValueDrink" (click)="goToEdit(serv.id)">{{serv?.bebidas + ' €'}}</div>

                        <div class="columnValueTobacco" (click)="goToEdit(serv.id)">{{serv?.tabaco + ' €'}}</div>

                        <div class="columnValueVitamin" (click)="goToEdit(serv.id)">{{serv?.vitaminas + ' €'}}</div>

                        <div class="columnValueOthers" (click)="goToEdit(serv.id)">{{serv?.otros + ' €'}}</div>

                        <!-- Modal -->
                        <ng-template class="custom-modal" #modalTabl let-modal>
                            <div class="modal-header">
                                <h5 class="modal-title"> Nota </h5>
                                <button type="button" class="close" (click)="modal.dismiss()" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </div>

                            <div class="modal-body" style="text-align: center;">
                                <!-- Aqui se coloca lo adentro -->

                                <h4>{{serv.nota}}</h4>

                                <!-- Afuera -->
                            </div>
                        </ng-template>
                        <!-- Fin Modal -->
                    </div>
                </div>

                <pagination-controls *ngIf="selected && addForm" class="pagination_Mobile" (pageChange)="page = $event"
                    previousLabel="" nextLabel="">
                </pagination-controls>

                <!-- Table 3 -->

                <div class="column3" *ngIf="selected && addForm">
                    <div class="columnTable3">

                        <div class="">
                            <label></label>
                        </div>

                        <div class="textSum">
                            <label>Suma</label>
                        </div>

                        <div class="textCommision">
                            <label>Comisión</label>
                        </div>

                        <div class="textTotals">
                            <label>Total</label>
                        </div>

                    </div>

                    <hr class="lineTable3">

                    <div class="columnTable3">
                        <label class="columnTreatment3">Tratamiento</label>
                        <label class="columnSum">{{totalService + ' €'}}</label>
                        <label class="columnComission">{{terapeutaName?.servicio + '
                            %'}}</label>
                        <label class="columnTotal">{{serviceCommission + ' €'}}</label>
                    </div>

                    <div class="columnTable3">
                        <label class="columnTreatment3">Propina</label>
                        <label class="columnSum">{{totalTipValue + ' €'}}</label>
                        <label class="columnComission">{{terapeutaName?.propina + ' %'}}</label>
                        <label class="columnTotal">{{commissionTip + ' €'}}</label>
                    </div>

                    <div class="columnTable3">
                        <label class="columnTreatment3">Bebida</label>
                        <label class="columnSum">{{totalValueDrink + ' €'}}</label>
                        <label class="columnComission">{{terapeutaName?.bebida + ' %'}}</label>
                        <label class="columnTotal">{{beverageCommission + ' €'}}</label>
                    </div>

                    <div class="columnTable3">
                        <label class="columnTreatment3">Tabaco</label>
                        <label class="columnSum">{{totalTobaccoValue + ' €'}}</label>
                        <label class="columnComission">{{terapeutaName?.tabaco + ' %'}}</label>
                        <label class="columnTotal">{{tobaccoCommission + ' €'}}</label>
                    </div>

                    <div class="columnTable3">
                        <label class="columnTreatment3">Vitamina</label>
                        <label class="columnSum">{{totalValueVitamins + ' €'}}</label>
                        <label class="columnComission">{{terapeutaName?.vitamina + '
                            %'}}</label>
                        <label class="columnTotal">{{vitaminCommission + ' €'}}</label>
                    </div>

                    <div class="columnTable3">
                        <label class="columnTreatment3">Otros</label>
                        <label class="columnSum">{{totalValueOther + ' €'}}</label>
                        <label class="columnComission">{{terapeutaName?.otros + ' %'}}</label>
                        <label class="columnTotal">{{commissionOthers + ' €'}}</label>
                    </div>

                    <div class="columnTable3">
                        <label class="columnTreatment3"></label>
                        <label class="columnSum"></label>
                        <label class="columnComission">Suma</label>
                        <label class="columnTotal">{{sumCommission + ' €'}}</label>
                    </div>

                    <div class="columnTable3">
                        <label class="columnTreatment3"></label>
                        <label class="columnSum"></label>
                        <label class="columnComission">Recibido</label>
                        <label class="columnTotal">{{receivedTherapist + ' €'}}</label>
                    </div>

                    <hr class="lineTotalPay">

                    <div class="columnTable3">
                        <label class="columnTreatment3"></label>
                        <label class="columnSum"></label>
                        <label class="columnTotalPay">Total a pagar</label>
                        <label class="columnTotal">{{totalCommission + ' €'}}</label>
                    </div>
                </div>

                <!-- Table 4 -->

                <div class="column4" *ngIf="selected && addForm">

                    <label class="textPayToTherapist">Pagado a terapeuta</label>

                    <hr class="lineTable4">

                    <div class="columnTable4">
                        <label class="columnTreatment4">Efectivo</label>
                        <label class="columnSum">{{totalCash + ' €'}}</label>
                    </div>

                    <div class="columnTable4">
                        <label class="columnTreatment4">Bizum</label>
                        <label class="columnSum">{{totalBizum + ' €'}}</label>
                    </div>

                    <div class="columnTable4">
                        <label class="columnTreatment4">Tarjeta</label>
                        <label class="columnSum">{{totalCard + ' €'}}</label>
                    </div>

                    <div class="columnTable4">
                        <label class="columnTreatment4">Transferencia</label>
                        <label class="columnSum">{{totalTransaction + ' €'}}</label>
                    </div>

                    <hr class="lineTable4">

                    <div class="columnTable4">
                        <label class="columnTreatment4">Transferencia</label>
                        <label class="columnSum">{{totalTherapistPayment + ' €'}}</label>
                    </div>
                </div>

            </div>
        </div>

        <div *ngIf="!editTerap" class="row inputButton">

            <div *ngIf="selected && unliquidatedService.length <= 0">
                <div class="row g-0">
                    <button mat-raised-button style="display: grid; margin: auto;" color="primary"
                        (click)="cancel()">Cancelar</button>
                </div>
            </div>

            <div *ngIf="selected && unliquidatedService.length > 0">
                <div class="row g-0">
                    <button type="submit" mat-raised-button style="display: grid; margin: auto;" color="primary"
                        (click)="save()">Guardar</button>
                </div>
            </div>

            <div *ngIf="selected && unliquidatedService.length > 0">
                <div class="row g-0">
                    <button type="submit" mat-raised-button style="display: grid; margin: auto;" color="primary"
                        (click)="cancel()">Cancelar</button>
                </div>
            </div>
        </div>

        <!-- Editar Terapeuta -->
        <div *ngIf="editTerap">

            <label class="titleEdit">Visualizacion de la liquidación de {{settledData[0]['terapeuta']}}
                con
                {{settledData[0]['encargada']}}
            </label>

            <div class="container">

                <div class="row containerTitleSelect">
                    <div class="row g-0">
                        <!-- <label class="titleLiquidation">Liquidación de Terapeuta
                                        {{settledData[0]['terapeuta']}}</label> -->
                        <label class="titleLiquidation">TOTAL LIQUIDACIÓN</label>
                    </div>

                    <div class="row g-0">
                        <label class="titleLiquidation">{{totalCommission + ' €'}}</label>
                    </div>
                </div>

                <hr class="lineLiquidation">

                <div class="col-auto" style="display: contents">
                    <label style="float: left">
                        {{liquidationTherapist.desdeFechaLiquidado + ' : ' +
                        liquidationTherapist.desdeHoraLiquidado + ' - '
                        +
                        liquidationTherapist.hastaFechaLiquidado + ' : ' +
                        liquidationTherapist.hastaHoraLiquidado}}</label>
                </div>

                <div class="row g-0 adjustTable outer">
                    <table class="table">
                        <thead>
                            <tr style="line-height: 0%; letter-spacing: 0px;">

                                <th></th>
                                <th class="textDate">Fecha</th>
                                <th class="textExit">Salida</th>
                                <th class="textHour">Hora</th>
                                <th class="textTreatment">Tratamiento</th>
                                <th class="textTip">Propina</th>
                                <th class="textPay">Pago</th>
                                <th class="textValue">€ a terap </th>
                                <th class="textColumn">Bebida</th>
                                <th class="textColumn">Tabaco</th>
                                <th class="textVitamin">Vitamina</th>
                                <th class="textColumn">Otros</th>

                            </tr>
                        </thead>
                        <tbody *ngFor="let serv of (settledData | terapeuta: liquidationTherapist.terapeuta 
                                            | encargada: liquidationTherapist.encargada) | paginate: { itemsPerPage: 10, 
                                            currentPage: page }">

                            <tr style="cursor: pointer; line-height: 0%;">

                                <td class="columnNote" [ngClass]="{'color2':serv.nota !== ''}"
                                    (click)="notes(serv.id, modalTabl)">
                                </td>

                                <td class="columnDate" (click)="goToEdit(serv.id)">
                                    {{serv.fecha}} </td>

                                <td class="columnExit" (click)="goToEdit(serv.id)">
                                    {{serv.salida}} </td>

                                <td class="columnHour" (click)="goToEdit(serv.id)">
                                    {{serv.horaStart + ' :' + serv.horaEnd}}</td>

                                <td class="columnTreatment" (click)="goToEdit(serv.id)">
                                    {{serv.servicio}}</td>

                                <td class="columnValueTip" (click)="goToEdit(serv.id)">
                                    {{serv.propina}}</td>

                                <td class="columnPaymentMethod" (click)="goToEdit(serv.id)">
                                    {{serv.formaPago}}</td>

                                <td class="columnValueTherapist" (click)="goToEdit(serv.id)">
                                    {{serv.numberTerap}}</td>

                                <td class="columnValueDrink" (click)="goToEdit(serv.id)">
                                    {{serv.bebidas}}</td>

                                <td class="columnValueTobacco" (click)="goToEdit(serv.id)">
                                    {{serv.tabaco}}</td>

                                <td class="columnValueVitamin" (click)="goToEdit(serv.id)">
                                    {{serv.vitaminas}}</td>

                                <td class="columnValueOthers" (click)="goToEdit(serv.id)">
                                    {{serv.otros}}</td>
                            </tr>

                            <!-- Modal -->
                            <ng-template class="custom-modal" #modalTabl let-modal>
                                <div class="modal-header">
                                    <h5 class="modal-title"> Nota </h5>
                                    <button type="button" class="close" (click)="modal.dismiss()" aria-label="Close">
                                        <span aria-hidden="true">&times;</span>
                                    </button>
                                </div>

                                <div class="modal-body" style="text-align: center;">
                                    <!-- Aqui se coloca lo adentro -->

                                    <h4>{{serv.nota}}</h4>

                                    <!-- Afuera -->
                                </div>
                            </ng-template>
                            <!-- Fin Modal -->

                        </tbody>

                        <tr>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td style="font-weight: bold; padding: 25px 19px 0px 0px; 
                                            float: inline-end; margin-bottom: 1rem"> {{totalService + '€'}}
                            </td>

                            <td style="font-weight: bold; padding: 24px 0px 0px 8px; margin-bottom: 1rem">
                                {{totalTipValue + '€'}} </td>

                            <td></td>

                            <td style="font-weight: bold; padding: 24px 0px 0px 8px; margin-bottom: 1rem">
                                {{totalTherapistValue + '€'}}
                            </td>

                            <td style="font-weight: bold; padding: 24px 0px 0px 8px; margin-bottom: 1rem">
                                {{totalValueDrink + '€'}}
                            </td>

                            <td style="font-weight: bold; padding: 24px 0px 0px 8px; margin-bottom: 1rem">
                                {{totalTobaccoValue + '€'}}
                            </td>

                            <td style="font-weight: bold; padding: 24px 0px 0px 8px; margin-bottom: 1rem">
                                {{totalValueVitamins + '€'}}
                            </td>

                            <td style="font-weight: bold; padding: 24px 0px 0px 8px; margin-bottom: 1rem">
                                {{totalValueOther + '€'}}
                            </td>
                        </tr>
                    </table>

                    <pagination-controls style="text-align-last: end;" (pageChange)="page = $event" previousLabel=""
                        nextLabel="">
                    </pagination-controls>

                </div>


                <!-- Table Sumatoria -->
                <div class="row g-0 adjustTables outer">
                    <table class="table">
                        <thead>
                            <tr class="table-secondary">
                                <th style="border-bottom: hidden;"></th>
                                <th class="sumTitleTable"> Suma</th>
                                <th class="textCommission"> Comisión</th>
                                <th class="sumTitleTable"> Total</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr style="line-height: 40%">
                                <th scope="row" class="sumTitle"> Tratamiento</th>
                                <td class="valueColumnSum">{{totalService + ' €'}}</td>
                                <td class="valueColumnSum"> {{terapeutaName?.servicio + ' %'}} </td>
                                <td class="valueColumnSum"> {{serviceCommission + ' €'}}</td>
                            </tr>

                            <tr style="line-height: 40%">
                                <th scope="row" class="sumTitle"> Propina</th>
                                <td class="valueColumnSum">{{totalTipValue + ' €'}}</td>
                                <td class="valueColumnSum"> {{terapeutaName?.propina + ' %'}} </td>
                                <td class="valueColumnSum">{{commissionTip + ' €'}}</td>
                            </tr>

                            <tr style="line-height: 40%">
                                <th scope="row" class="sumTitle"> Bebida</th>
                                <td class="valueColumnSum">{{totalValueDrink + ' €'}}</td>
                                <td class="valueColumnSum"> {{terapeutaName?.bebida + ' %'}} </td>
                                <td class="valueColumnSum"> {{beverageCommission + ' €'}}</td>
                            </tr>

                            <tr style="line-height: 40%">
                                <th scope="row" class="sumTitle"> Tabaco</th>
                                <td class="valueColumnSum"> {{totalTobaccoValue + ' €'}}</td>
                                <td class="valueColumnSum"> {{terapeutaName?.tabaco + ' %'}} </td>
                                <td class="valueColumnSum"> {{tobaccoCommission + ' €'}}</td>
                            </tr>

                            <tr style="line-height: 40%">
                                <th scope="row" class="sumTitle"> Vitamina</th>
                                <td class="valueColumnSum"> {{totalValueVitamins + ' €'}}</td>
                                <td class="valueColumnSum"> {{terapeutaName['vitamina'] + ' %'}} </td>
                                <td class="valueColumnSum"> {{vitaminCommission + ' €'}}</td>
                            </tr>

                            <tr style="line-height: 40%">
                                <th scope="row" class="sumTitle"> Otros</th>
                                <td class="valueColumnSum">{{totalValueOther + ' €'}}</td>
                                <td class="valueColumnSum"> {{terapeutaName['otros'] + ' %'}}</td>
                                <td class="valueColumnSum">{{commissionOthers + ' €'}}</td>
                            </tr>

                            <tr style="line-height: 40%">
                                <th scope="row" style="border-bottom: hidden;"></th>
                                <td style="border-bottom: hidden;"></td>
                                <td class="sumTitle" style="text-align: center;">Suma</td>
                                <td class="valueColumnSum">{{sumCommission + ' €'}}</td>
                            </tr>

                            <tr style="line-height: 40%">
                                <th scope="row" style="border-bottom: hidden;"></th>
                                <td style="border-bottom: hidden;"></td>
                                <td class="sumTitleReceived">Recibido </td>
                                <td class="valueReceived"> {{receivedTherapist + ' €'}}
                                </td>
                            </tr>

                            <tr style="line-height: 40%">
                                <th scope="row" style="border-bottom: hidden"></th>
                                <td style="border-bottom: hidden"></td>
                                <td class="totalToPay">Total a pagar</td>
                                <td class="totalAmountToPay"> {{totalCommission + ' €'}}</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="row inputButton">

                    <div>
                        <div class="row g-0">
                            <button type="submit" mat-raised-button style="display: grid; margin: auto;" color="primary"
                                (click)="cancel()">Cancelar</button>
                        </div>
                    </div>

                    <div>
                        <div class="row g-0">
                            <button type="submit" mat-raised-button style="display: grid; margin: auto;" color="primary"
                                (click)="edit()">Editar</button>
                        </div>
                    </div>

                </div>

            </div>
        </div>
    </div>
</div>