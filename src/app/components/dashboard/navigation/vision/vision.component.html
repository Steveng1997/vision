<h4 style="text-align: center; font-family: monospace; font-size: x-large;"> TOTAL HOY {{totalServicio}} € </h4>

<h5 class="text-center display-4 text-danger font-family: cursive; font-size: initial" *ngIf="vision.length == 0">
  No se ha hecho ningun servicio el dia de hoy
</h5>


<!-- Ocupacion -->
<h4 style="text-align: center; margin-top: 3rem; font-family: monospace; font-size: x-large"> OCUPACIÓN </h4>

<div class="container">
  <table class="table hijo">
    <thead>
      <tr class="columnTable">
        <th scope="col"></th>
        <th scope="col">Terapeuta</th>
        <th scope="col">Salida</th>
        <th scope="col">Fin</th>
        <th scope="col">Restante</th>
      </tr>
    </thead>
    <tbody *ngFor="let vis of terapeutas ">
      <tr>
        <td 
          [ngClass]="{'ocupado':calculardiferencia(vis.horaEnd) !== '' , 'disponible':calculardiferencia(vis.horaEnd) === '', 'disponible2':calculardiferencia(vis.horaEnd) === '00:00'}">
        </td>
        <td data-label="Terapeuta">{{vis.nombre}}</td>
        <td data-label="Salida" [ngClass]="{'disponibleEncargada':calculardiferencia(vis.horaEnd) === ''}">
          {{vis.salida}}</td>
        <td data-label="Fin" [ngClass]="{'disponibleEncargada':calculardiferencia(vis.horaEnd) === ''}">
          {{vis.horaEnd}}</td>
        <td data-label="Restante">{{calculardiferencia(vis.horaEnd)}}</td>
      </tr>
    </tbody>
  </table>
</div>

<div class="container">
  <table class="table">
    <thead class="thead-dark">
      <tr>
        <td class="columnTableTotal"></td>
        <td class="columnTableTotal"></td>
        <td class="columnTableTotal"></td>
        <td class="columnTableTotal"></td>
        <td data-label="Total" style="font-weight: bold; font-size: large; color: crimson;">Total</td>
        <td data-label="Tratamiento" style="border-top: solid; border-bottom: solid;  border-left: solid;">{{totalVision
          + ' €'}}</td>
        <td class="columnTableTotal" style="border-top: solid; border-bottom: solid;"></td>
        <td data-label="Bebida" style="border-top: solid; border-bottom: solid;">{{totalBebida + ' €'}}</td>
        <td data-label="Tabaco" style="border-top: solid; border-bottom: solid;">{{totalTabaco + ' €'}}</td>
        <td data-label="Vitamina" style="border-top: solid; border-bottom: solid;">{{totalVitamina + ' €'}}</td>
        <td data-label="Propina" style="border-top: solid; border-bottom: solid;">{{totalPropina + ' €'}}</td>
        <td data-label="Otros" style="border-top: solid; border-bottom: solid; border-right: solid;">{{totalOtros + '
          €'}}</td>
      </tr>
      <tr class="columnTable">
        <th scope="col">Nota</th>
        <th scope="col">Terap.</th>
        <th scope="col">Encarg.</th>
        <th scope="col">Hora</th>
        <th scope="col">Tiempo</th>
        <th scope="col">Tratamiento</th>
        <th scope="col">Salida</th>
        <th scope="col">Bebida</th>
        <th scope="col">Tabaco</th>
        <th scope="col">Vitamina</th>
        <th scope="col">Propina</th>
        <th scope="col">Otros</th>
      </tr>
    </thead>
    <tbody *ngFor="let vis of vision ">
      <tr style="cursor: pointer;">
        <td class="notaDisponible" [ngClass]="{'nota':vis.nota !== ''}" (click)="notas(vis.id, modalTabl)"></td>
        <td data-label="Terap" (click)="editamos(vis.id)">{{vis.terapeuta}}</td>
        <td data-label="Encarg." (click)="editamos(vis.id)">{{vis.encargada}}</td>
        <td data-label="Hora" (click)="editamos(vis.id)">{{vis.horaStart + '-' + vis.horaEnd}}</td>
        <td data-label="Minuto" (click)="editamos(vis.id)">{{vis.minuto }}</td>
        <td data-label="Tratamiento" (click)="editamos(vis.id)">{{vis.servicio + ' €'}}</td>
        <td data-label="Salida" (click)="editamos(vis.id)">{{vis.salida}}</td>
        <td data-label="Bebida" (click)="editamos(vis.id)">{{vis.bebidas + ' €'}}</td>
        <td data-label="Tabaco" (click)="editamos(vis.id)">{{vis.tabaco + ' €'}}</td>
        <td data-label="Vitamina" (click)="editamos(vis.id)">{{vis.vitaminas + ' €'}}</td>
        <td data-label="Propina" (click)="editamos(vis.id)">{{vis.propina+ ' €'}}</td>
        <td data-label="Otros" (click)="editamos(vis.id)">{{vis.otros + ' €'}}</td>
      </tr>

      <!-- Modal -->
      <ng-template class="custom-modal" #modalTabl let-modal>
        <div class="modal-header">
          <h5 class="modal-title"> Nota </h5>
          <button type="button" class="close" (click)="modal.dismiss()" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>

        <div class="modal-body" style="text-align: center;">
          <!-- Aqui se coloca lo adentro -->

          <h4>{{vis.nota}}</h4>

          <!-- Afuera -->
        </div>
      </ng-template>

      <!-- Fin Modal -->
    </tbody>

  </table>
</div>