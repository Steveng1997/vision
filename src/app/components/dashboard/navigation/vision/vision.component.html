<h4 style="text-align: center; font-family: monospace; font-size: x-large;"> TOTAL SERVICIO {{totalServicio}} € </h4>

<h5 class="text-center display-4 text-danger font-family: cursive; font-size: initial" *ngIf="vision.length == 0">
  No se ha hecho ningun servicio el dia de hoy
</h5>


<!-- Ocupacion -->
<h4 style="text-align: center; margin-top: 3rem; font-family: monospace; font-size: x-large"> OCUPACIÓN </h4>

<div class="padre">
  <div class="hijo">
    <table class="table">
      <thead>
        <tr class="table-secondary">
          <th scope="col"></th>
          <th scope="col">Terapeuta</th>
          <th scope="col">Salida</th>
          <th scope="col">Fin</th>
          <th scope="col">Restante</th>
        </tr>
      </thead>
      <tbody *ngFor="let vis of terapeutas">
        <tr>
          <td
            [ngClass]="{'ocupado':calculardiferencia(vis.horaEnd, vis.nombre) !== '' , 'disponible':calculardiferencia(vis.horaEnd, vis.nombre) === '', 'disponible2':calculardiferencia(vis.horaEnd, vis.nombre) === '00:00'}">
          </td>
          <td>{{vis.nombre}}</td>
          <td [ngClass]="{'disponibleEncargada':calculardiferencia(vis.horaEnd, vis.nombre) === ''}">
            {{vis.salida}}</td>
          <td [ngClass]="{'disponibleEncargada':calculardiferencia(vis.horaEnd, vis.nombre) === ''}">
            {{vis.horaEnd}}</td>
          <td>{{calculardiferencia(vis.horaEnd, vis.nombre)}}</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

<div class="padre">
  <div class="hijo">
    <table class="table">
      <thead>
        <tr>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td style="font-weight: bold; font-size: large; color: crimson;">Total</td>
          <td style="border-top: solid; border-bottom: solid;  border-left: solid;">
            {{totalVision
            + ' €'}}</td>
          <td style="border-top: solid; border-bottom: solid;"></td>
          <td style="border-top: solid; border-bottom: solid;">{{totalBebida + ' €'}}</td>
          <td style="border-top: solid; border-bottom: solid;">{{totalTabaco + ' €'}}</td>
          <td style="border-top: solid; border-bottom: solid;">{{totalVitamina + ' €'}}</td>
          <td style="border-top: solid; border-bottom: solid;">{{totalPropina + ' €'}}</td>
          <td style="border-top: solid; border-bottom: solid; border-right: solid;">{{totalOtros + '
            €'}}</td>
        </tr>
        <tr class="table-secondary">
          <th scope="col">Nota</th>
          <th scope="col">Terap.</th>
          <th scope="col">Encarg.</th>
          <th scope="col">Hora</th>
          <th scope="col">Tiempo</th>
          <th scope="col">Tratamiento</th>
          <th scope="col">Salida</th>
          <th scope="col">Bebida</th>
          <th scope="col">Tabaco</th>
          <th scope="col">Vitamina</th>
          <th scope="col">Propina</th>
          <th scope="col">Otros</th>
        </tr>
      </thead>
      <tbody *ngFor="let vis of vision | paginate: { itemsPerPage: 10, currentPage: page } ">
        <tr style="cursor: pointer;">
          <td [ngClass]="{'nota':vis.nota !== ''}" (click)="notas(vis.id, modalTabl)"></td>
          <td (click)="editamos(vis.id)">{{vis.terapeuta}}</td>
          <td (click)="editamos(vis.id)">{{vis.encargada}}</td>
          <td (click)="editamos(vis.id)">{{vis.horaStart + '-' + vis.horaEnd}}</td>
          <td (click)="editamos(vis.id)">{{vis.minuto }}</td>
          <td (click)="editamos(vis.id)">{{vis.servicio + ' €'}}</td>
          <td (click)="editamos(vis.id)">{{vis.salida}}</td>
          <td (click)="editamos(vis.id)">{{vis.bebidas + ' €'}}</td>
          <td (click)="editamos(vis.id)">{{vis.tabaco + ' €'}}</td>
          <td (click)="editamos(vis.id)">{{vis.vitaminas + ' €'}}</td>
          <td (click)="editamos(vis.id)">{{vis.propina+ ' €'}}</td>
          <td (click)="editamos(vis.id)">{{vis.otros + ' €'}}</td>
        </tr>

        <!-- Modal -->
        <ng-template class="custom-modal" #modalTabl let-modal>
          <div class="modal-header">
            <h5 class="modal-title"> Nota </h5>
            <button type="button" class="close" (click)="modal.dismiss()" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>

          <div class="modal-body" style="text-align: center;">
            <!-- Aqui se coloca lo adentro -->

            <h4>{{vis.nota}}</h4>

            <!-- Afuera -->
          </div>
        </ng-template>

        <!-- Fin Modal -->
      </tbody>

    </table>

    <pagination-controls style="float: right;" (pageChange)="page = $event" previousLabel="Anterior"
      nextLabel="Siguiente">
    </pagination-controls>
  </div>
</div>